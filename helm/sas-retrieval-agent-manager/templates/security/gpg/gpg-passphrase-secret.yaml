{{- $publicKey := "" -}}
{{- $privateKey := "" -}}
{{- $passphrase := "" -}}
{{- if (include "testValuesPath" (list .Values "global" "configuration" "gpg" "publicKey")) | eq "true" -}}
  {{- if ne .Values.global.configuration.gpg.publicKey "" -}}
    {{- $publicKey = .Values.global.configuration.gpg.publicKey -}}
  {{- end -}}
{{- end -}}
{{- if (include "testValuesPath" (list .Values "global" "configuration" "gpg" "privateKey")) | eq "true" -}}
  {{- if ne .Values.global.configuration.gpg.privateKey "" -}}
    {{- $privateKey = .Values.global.configuration.gpg.privateKey -}}
  {{- end -}}
{{- end -}}
{{- if (include "testValuesPath" (list .Values "global" "configuration" "gpg" "passphrase")) | eq "true" -}}
  {{- if ne .Values.global.configuration.gpg.passphrase "" -}}
    {{- $passphrase = .Values.global.configuration.gpg.passphrase -}}
  {{- end -}}
{{- end -}}
apiVersion: v1
kind: Secret
metadata:
  name: gpg-passphrase
  labels:
    {{- include "gpg.labels" . | nindent 4 }}
stringData:
  passphrase: {{ $passphrase | quote }}
